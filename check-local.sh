#!/bin/bash
# æœ¬åœ°æ£€æŸ¥è„šæœ¬ - åœ¨æ¨é€å‰è¿è¡Œï¼Œç¡®ä¿ CI é€šè¿‡

set -e

echo "=========================================="
echo "ğŸš€ æœ¬åœ°æ£€æŸ¥å¼€å§‹"
echo "=========================================="
echo ""

echo "ğŸ“‹ Step 1: ä»£ç è§„èŒƒæ£€æŸ¥ (ruff)"
echo "------------------------------------------"
uv run ruff check
uv run ruff format --check
echo "âœ… ä»£ç è§„èŒƒæ£€æŸ¥é€šè¿‡"
echo ""

echo "ğŸ“‹ Step 2: ç±»å‹æ£€æŸ¥ (pyright)"
echo "------------------------------------------"
uv run pyright
echo "âœ… ç±»å‹æ£€æŸ¥é€šè¿‡"
echo ""

echo "ğŸ“‹ Step 3: å•å…ƒæµ‹è¯• (pytest tests)"
echo "------------------------------------------"
uv run pytest tests -v --tb=short
echo "âœ… å•å…ƒæµ‹è¯•é€šè¿‡"
echo ""

echo "=========================================="
echo "ğŸ‰ æ‰€æœ‰æœ¬åœ°æ£€æŸ¥é€šè¿‡ï¼å¯ä»¥å®‰å…¨æ¨é€äº†"
echo "=========================================="
echo ""
echo "æ¨é€å‘½ä»¤: git push origin main"
